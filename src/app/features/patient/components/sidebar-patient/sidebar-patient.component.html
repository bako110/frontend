<div class="patient-sidebar text-white d-flex flex-column p-3" [class.collapsed]="isCollapsed">

  <!-- LOGO -->
  <div class="d-flex justify-content-between align-items-center mb-2">
    <h1 class="fw-bold text-white mb-0 sidebar-title">SANORDV</h1>

    <!-- Flèche uniquement en mode étendu -->
    <i *ngIf="!isCollapsed"
       class="bi bi-chevron-left fs-4 collapse-btn"
       (click)="toggleSidebar()"
       title="Réduire"></i>
  </div>

  <hr class="text-white">

  <!-- PROFIL (étendu : photo à gauche + nom à droite) -->
  <div class="d-flex align-items-center gap-2 mb-3" *ngIf="!isCollapsed">
    <div class="position-relative">
      <img
        [src]="patient.photo && patient.photo.length > 0 ? patient.photo : 'assets/default-avatar.png'"
        alt="patient"
        class="patient-avatar"
        title="Modifier le profil" />
      <i class="bi bi-pencil-fill edit-icon"
         title="Modifier le profil"
         (click)="goToProfileEdit()"></i>
    </div>

    <div>
      <h5 class="mb-0 fw-bold">{{ patient.nom }} {{ patient.prenom }}</h5>
    </div>
  </div>

  <!-- PROFIL réduit (photo seule centrée) -->
  <div *ngIf="isCollapsed" class="text-center mb-3">
    <div class="position-relative d-inline-block">
      <img
        [src]="patient.photo && patient.photo.length > 0 ? patient.photo : 'assets/default-avatar.png'"
        alt="patient"
        class="patient-avatar mb-2"
        title="Modifier le profil" />
      <i class="bi bi-pencil-fill edit-icon"
         title="Modifier le profil"
         (click)="goToProfileEdit()"></i>
    </div>
  </div>

  <hr class="text-white">

  <!-- Flèche quand réduit -->
  <div *ngIf="isCollapsed" class="text-center mb-3">
    <i class="bi bi-chevron-right fs-4 collapse-btn" (click)="toggleSidebar()" title="Agrandir"></i>
  </div>

  <!-- MENU -->
  <nav class="nav flex-column">
    <a *ngFor="let item of menuItems"
       [routerLink]="item.link"
       routerLinkActive="active-link"
        [routerLinkActiveOptions]="{ exact: true }"
       class="nav-link d-flex align-items-center text-white"
       [attr.title]="isCollapsed ? item.title : null">
      <i [class]="'bi ' + item.icon + ' fs-5'"></i>
      <span *ngIf="!isCollapsed" class="ms-2">{{ item.title }}</span>
    </a>
  </nav>

</div>
