<div class="container">
  <h1>BIENVENUE À SANORDV</h1>

  <div class="login-form">
    <h2>SE CONNECTER</h2>
    <p>Besoin d’un compte ? <a routerLink="/auth/register">S’inscrire</a></p>

    <!-- Message de succès -->
    <div *ngIf="successMessage" class="alert alert-success">
      {{ successMessage }}
    </div>

    <!-- Message d'erreur -->
    <div *ngIf="errorMessage" class="alert alert-danger">
      {{ errorMessage }}
    </div>

    <form [formGroup]="loginForm" (ngSubmit)="onSubmit()">
      <!-- Champ Email -->
      <div class="input-group">
        <label for="email">Email <span class="required">*</span></label>
        <div class="input-with-icon">
          <input
            id="UserID"
            type="text"
            formControlName="UserID"
            placeholder="Email ou ID"
          />
          <i
            class="bi bi-envelope"
            style="position: absolute; right: 10px; top: 50%; transform: translateY(-50%); color: #9e9e9e;"
          ></i>
        </div>
      </div>

      <!-- Champ Mot de passe -->
      <div class="input-group">
        <label for="motDePasse">Mot de passe <span class="required">*</span></label>
        <div class="password-wrapper">
          <input
            id="motDePasse"
            [type]="showPassword ? 'text' : 'password'"
            formControlName="motDePasse"
            placeholder="Mot de passe"
            class="password-input"
          />
          <i
            class="bi"
            [ngClass]="showPassword ? 'bi-eye-slash' : 'bi-eye'"
            (click)="togglePasswordVisibility()"
          ></i>
        </div>
      </div>

      <a routerLink="/auth/forgot-password">Mot de passe oublié ?</a>

      <!-- Bouton avec loader -->
      <button type="submit" [disabled]="loginForm.invalid || isSubmitting">
        <span *ngIf="!isSubmitting">Connexion</span>
        <span *ngIf="isSubmitting" class="spinner-border spinner-border-sm" role="status" aria-hidden="true"></span>
        <span *ngIf="isSubmitting"> Connexion en cours...</span>
      </button>
    </form>
  </div>
</div>
